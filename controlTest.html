<html>
	<head>
		<title>My first Three.js app</title>
		<style>canvas { width: 100%; height: 100% }</style>
	</head>
	<body>
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script src="colors.js"></script>
		<script>
			//Start with 3 parts, scene, camera and renderer
			var scene = new THREE.Scene();
			//<FOV>, <ASPECTRATIO>, <NEARCLIP>, <FARCLIP>
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 3000 );
			camera.rotation = new THREE.Euler( 0, 0, 0, 'YXZ' );

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			//Add Geometry
			var halfSize = 3;
			var cube;
			for(var i = -halfSize; i < halfSize; i++) {
				for(var j = -halfSize; j < halfSize; j++) {
					for(var k = -halfSize; k < halfSize; k++) {
						var scale = (i + j + k + 15) / 40;
						var geometry = new THREE.CubeGeometry(scale, scale, scale);
						var material = new THREE.MeshBasicMaterial( { color: Math.random() * 0x440000 });
						cube = new THREE.Mesh( geometry, material );
						cube.position.set( i, j, k );
						scene.add( cube );
					}
				}
			}

			camera.position.x = 0;
			camera.position.y = 0;
			camera.position.z = 0;

			var radius = 10;

			var wIsPressed = false;
			var sIsPressed = false; 
			var aIsPressed = false;
			var dIsPressed = false;
			var lShiftIsPressed = false;
			var spaceIsPressed = false;
			document.onkeydown = function(down) {

				switch (down.keyCode) {
	                case 87: // W
	                	wIsPressed = true;
	                break;

	                case 83: // S
	                	sIsPressed = true;
	                break;

	                case 65: // A
	                	aIsPressed = true;
	                break;

	                case 68: // D
	     				dIsPressed = true;
	                break;

	                case 32: // Space
	                	spaceIsPressed = true;
	                break;

	                case 16: // lShift
	                	lShiftIsPressed = true;
	                break;

	                case 66:
	                	alert(mouseX);
	                break;
				}
			}

			document.onkeyup = function(up) {

				switch (up.keyCode) {
	                case 87: // W
	                	wIsPressed = false;
	                break;

	                case 83: // S
	                	sIsPressed = false;
	                break;

	                case 65: // A
	                	aIsPressed = false;
	                break;

	                case 68: // D
	     				dIsPressed = false;
	                break;

	                case 32: // Space
	                	spaceIsPressed = false;
	                break;
	                
	                case 16: // lShift
	                	lShiftIsPressed = false;
	                break;	                

	                case 66:
	                	alert(mouseX);
	                break;
				}
			}
			
			var mouseX;
			var mouseY;
			document.onmousemove = function(move) {
				mouseX = move.clientX;
				mouseY = move.clientY;
			}

			var mouseDown;
			document.onmousedown = function(click) {
				mouseDown = true;
			}

			document.onmouseup = function(release) {
				mouseDown = false;
			}

			var dVert = .1;
			var theta = 0;
			var dTheta = .03;
			var mouseXOld;
			var mouseYOld;
			function updateCamera() {
				if(wIsPressed == true) {
					camera.position.x += Math.cos( (Math.PI / 2) + camera.rotation.y) / 5;
	                camera.position.z -= Math.sin( (Math.PI / 2) + camera.rotation.y) / 5;
				}
				if(sIsPressed == true) {
                	camera.position.x += Math.cos( (-Math.PI / 2) + camera.rotation.y) / 5;
                	camera.position.z -= Math.sin( (-Math.PI / 2) + camera.rotation.y) / 5;
				}
				if(aIsPressed == true) {
					camera.position.x -= Math.cos(camera.rotation.y) / 10;
	                camera.position.z += Math.sin(camera.rotation.y) / 10;
				}
				if(dIsPressed == true) {
	                camera.position.x += Math.cos(camera.rotation.y) / 10;
                	camera.position.z -= Math.sin(camera.rotation.y) / 10;
				}
				if(lShiftIsPressed == true) {
					camera.position.y -= dVert;
				}
				if(spaceIsPressed == true) {
					camera.position.y += dVert;
				}

				if(mouseDown) {
					camera.rotation.y -= (mouseX - mouseXOld) / 300;
					camera.rotation.x -= (mouseY - mouseYOld) / 600;
				}
				


				mouseXOld = mouseX;
				mouseYOld = mouseY; 
				
			}

			function render() {
				requestAnimationFrame(render);

				updateCamera();

				renderer.render(scene, camera);
			}

			
			render();
		</script>
	</body>
</html>